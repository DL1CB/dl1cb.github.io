(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"56b4":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"q-pa-lg"},[1==t.step?n("q-card",{staticClass:"my-card"},[n("q-card-section",[n("q-input",{attrs:{outlined:"",label:"Full Name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),n("q-input",{attrs:{outlined:"",label:"Telephone Number"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}),n("q-input",{attrs:{outlined:"",label:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),n("q-card-actions",{attrs:{vertical:""}},[n("q-btn",{staticClass:"glossy",attrs:{rounded:"",color:"primary",label:"Register Blue"},on:{click:t.connectDigireg}})],1)],1):t._e(),2==t.step?n("q-card",{staticClass:"my-card"},[n("q-card-section",[n("q-img",{attrs:{src:"/bluetooth.svg",basic:""}})],1)],1):t._e(),3==t.step?n("q-card",{staticClass:"my-card"},[n("q-card-section",[n("q-img",{attrs:{src:"/encrypt.svg",basic:""}})],1)],1):t._e(),4==t.step?n("q-card",{staticClass:"my-card"},[n("q-card-section",[n("q-img",{attrs:{src:"/transfer.svg",basic:""}})],1)],1):t._e(),5==t.step?n("q-card",{staticClass:"my-card"},[n("q-card-section",[n("q-img",{attrs:{src:"/success.svg",basic:""}})],1)],1):t._e(),t.establishments.length?n("q-card",{staticClass:"my-card",attrs:{flat:"",bordered:""}},[n("q-card-section",[n("q-timeline",{attrs:{color:"secondary"}},t._l(t.establishments,(function(e){return n("q-timeline-entry",{key:e.timestamp,attrs:{title:e.name,subtitle:t.formatDate(new Date(e.timestamp),"D MMM YYYY - h:mm a")}},[t._v("\n              "+t._s(e.street)+" "+t._s(e.city)+" "+t._s(e.zip)),n("br"),t._v("\n              "+t._s(e.state)+" "+t._s(e.country)),n("br"),t._v("\n              "+t._s(e.phone)+" "),n("br"),t._v("\n              "+t._s(e.email)+" "),n("br"),t._v("\n              "+t._s(e.id)+" "),n("br")])})),1)],1)],1):t._e()],1)},i=[],s=(n("fb6a"),n("e6cf"),n("ded3")),r=n.n(s),o=n("b178"),c=n("2f62"),l=(n("4e82"),n("1c35").Buffer);function u(t,e,n){var a=[],i=null;return u._encode(a,t),i=l.concat(a),u.bytes=i.length,l.isBuffer(e)?(i.copy(e,n),e):i}u.bytes=-1,u._floatConversionDetected=!1,u._encode=function(t,e){if(l.isBuffer(e))return t.push(l.from(e.length+":")),void t.push(e);if(null!=e)switch(typeof e){case"string":u.buffer(t,e);break;case"number":u.number(t,e);break;case"object":e.constructor===Array?u.list(t,e):u.dict(t,e);break;case"boolean":u.boolean(t,e);break}};var d=l.from("e"),f=l.from("d"),h=l.from("l");u.buffer=function(t,e){t.push(l.from(l.byteLength(e)+":"+e))},u.number=function(t,e){var n=2147483648,a=e/n<<0,i=e%n<<0,s=a*n+i;t.push(l.from("i"+s+"e")),s===e||u._floatConversionDetected||(u._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+e+'":','Bencoding only defines support for integers, value was converted to "'+s+'"'),console.trace())},u.boolean=function(t,e){var n=e?1:0;t.push(l.from("j"+n+"e")),1!=e&&0!=e&&(console.warn("WARNING: Possible data corruption detected with value "+e),console.trace())},u.dict=function(t,e){t.push(f);for(var n,a=0,i=Object.keys(e).sort(),s=i.length;a<s;a++)n=i[a],null!=e[n]&&(u.buffer(t,n),u._encode(t,e[n]));t.push(d)},u.list=function(t,e){var n=0,a=e.length;for(t.push(h);n<a;n++)null!=e[n]&&u._encode(t,e[n]);t.push(d)};var m=n("1c35").Buffer;const p=105,b=106,g=58,v=100,w=108,y=101;function _(t,e,n){for(var a=0,i=1,s=e;s<n;s++){var r=t[s];if(r<58&&r>=48)a=10*a+(r-48);else if(s!==e||43!==r){if(s!==e||45!==r){if(46===r)break;throw new Error("not a number: buffer["+s+"] = "+r)}i=-1}}return a*i}function q(t){var e="";function n(n,a){e+=n;try{var i=C(e,a);t(i)}catch(s){}}return n}function C(t,e,n,a){return null==t||0===t.length?null:("number"!==typeof e&&null==a&&(a=e,e=void 0),"number"!==typeof n&&null==a&&(a=n,n=void 0),C.position=0,C.encoding=a||null,C.data=m.isBuffer(t)?t.slice(e,n):new m(t),C.bytes=C.data.length,C.next())}C.bytes=0,C.position=0,C.data=null,C.encoding=null,C.next=function(){switch(C.data[C.position]){case v:return C.dictionary();case w:return C.list();case p:return C.integer();case b:return C.boolean();default:return C.buffer()}},C.find=function(t){var e=C.position,n=C.data.length,a=C.data;while(e<n){if(a[e]===t)return e;e++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(t)+'" [0x'+t.toString(16)+"]")},C.dictionary=function(){C.position++;var t={};while(C.data[C.position]!==y)t[C.buffer()]=C.next();return C.position++,t},C.list=function(){C.position++;var t=[];while(C.data[C.position]!==y)t.push(C.next());return C.position++,t},C.integer=function(){var t=C.find(y),e=_(C.data,C.position+1,t);return C.position+=t+1-C.position,e},C.boolean=function(){var t=C.find(y),e=_(C.data,C.position+1,t);return C.position+=t+1-C.position,1==e||0!=e&&void 0},C.buffer=function(){var t=C.find(g),e=_(C.data,C.position,t),n=++t+e;return C.position=n,C.encoding?C.data.toString(C.encoding,t,n):C.data.slice(t,n)};const D=Object(c["a"])("establishments");var k={name:"DigiReg",mounted:function(){this.fetchEstablishments()},data(){return{step:1,date:(new Date).getTime(),name:"",phone:"",email:"",logs:[]}},computed:r()({},D.mapState(["establishments"])),methods:r()(r()({log(t){console.log(t),this.logs.push(t)}},D.mapActions(["fetchEstablishments","addEstablishment"])),{},{formatDate:o["a"].formatDate,async connectDigireg(){const t=this.log;try{const a="6e400001-b5a3-f393-e0a9-e50e24dcca9e",i="6e400002-b5a3-f393-e0a9-e50e24dcca9e",s="6e400003-b5a3-f393-e0a9-e50e24dcca9e";t("Requesting Bluetooth Device"),this.step=2;const r=await navigator.bluetooth.requestDevice({filters:[{services:[a]}]});t("Connecting to GATT Server"),this.step=3;const o=await r.gatt.connect();t("Getting Service");const c=await o.getPrimaryService(a);t("Getting TX Characteristic");const l=await c.getCharacteristic(s);t("Start TX Notifications"),await l.startNotifications();var e=q((t=>{this.addEstablishment(t).then((()=>{this.fetchEstablishments()}))}));let d=new TextDecoder;t("TX Characteristic addEventListener"),await l.addEventListener("characteristicvaluechanged",(function(t){e(d.decode(t.target.value),"utf-8")})),t("Getting RX Characteristic");const f=await c.getCharacteristic(i);t("Writing RX Characteristic"),this.step=4;const h=u({date:this.date,name:this.name,phone:this.phone,email:this.email});for(var n=0;n<=h.byteLength;n+=20)await f.writeValue(h.slice(n,n+20));t("Sleep Before Disconnect"),await new Promise((t=>setTimeout(t,1e3))),this.step=5,t("Disconnect");await r.gatt.disconnect();await new Promise((t=>setTimeout(t,1e3))),this.step=1}catch(a){t("error"),t(a),this.step=1}}})},E=k,x=n("2877"),T=Object(x["a"])(E,a,i,!1,null,null,null);e["default"]=T.exports}}]);